<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>網頁十三張遊戲</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #228B22; /* 深綠色背景，模擬賭桌 */
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column; /* 垂直排列遊戲元素 */
            min-height: 100vh; /* 確保內容至少佔滿整個視窗高度 */
            margin: 0;
            padding: 20px; /* 增加一些內邊距 */
            box-sizing: border-box; /* 確保 padding 不會增加元素總寬高 */
        }

        .game-container {
            background-color: #336633; /* 更深綠色容器背景，模擬絨布 */
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6); /* 更強烈的陰影 */
            padding: 30px;
            text-align: center;
            position: relative; /* 為了動畫元素的定位 */
            width: 95%; /* 限制遊戲容器寬度，避免過寬 */
            max-width: 1200px; /* 設定最大寬度 */
            margin-bottom: 20px; /* 底部留一些空間 */
            display: flex; /* 使用 Flexbox 佈局 */
            flex-direction: column; /* 垂直排列容器內元素 */
            align-items: center; /* 水平置中容器內元素 */
        }

        h1 {
            font-size: 2.5em; /* 加大標題字體 */
            margin-bottom: 20px;
            text-shadow: 2px 2px 3px black; /* 更明顯的文字陰影 */
        }

        .status-display {
            font-size: 1.4em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px black;
        }

        .opponents-area, .player-area {
            display: flex;
            justify-content: space-around; /* 水平分散對手區域 */
            width: 100%; /* 佔滿容器寬度 */
            margin-bottom: 20px; /* 區域間隔 */
        }

        .opponent-area, .player-area {
            text-align: center;
        }

        .opponent-area h2, .player-area h2 {
            font-size: 1.6em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px black;
        }

        .hand-area {
            display: flex;
            justify-content: center; /* 水平置中三道牌 */
            gap: 15px; /* 三道牌之間間距 */
            margin-bottom: 10px;
        }

        .hand-area h3 {
            font-size: 1.1em;
            margin: 0 10px; /* 標題與牌組間距 */
            text-shadow: 1px 1px 1px black;
        }

        .cards {
            display: flex;
            gap: 5px; /* 牌之間間距 */
            min-height: 100px; /* 設定最小高度，方便排版 */
            justify-content: center; /* 牌組水平置中 */
            align-items: center; /* 垂直置中牌組 */
        }

        .card {
            width: 50px; /* 牌寬度 */
            height: 75px; /* 牌高度 */
            background-color: #fff;
            border: 1px solid #bbb;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1em;
            color: black;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .controls-area {
            display: flex;
            justify-content: center; /* 水平置中按鈕 */
            gap: 20px; /* 按鈕之間間距 */
            margin-bottom: 25px;
        }

        .action-button, .hint-button {
            background-color: #4682B4;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-weight: bold;
        }

        .action-button:hover, .hint-button:hover {
            background-color: #6495ED;
            transform: translateY(-1px);
            box-shadow: 2px 3px 4px rgba(0, 0, 0, 0.5);
        }

        .action-button:active, .hint-button:active {
            transform: translateY(0);
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
        }


        .chips-display {
            font-size: 1.3em;
            margin-top: 10px;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
            color: #ffd700; /* 金色籌碼文字 */
        }

        .chips-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px; /* 與下注區隔開 */
        }

        .chip-button {
            width: 50px; /* 籌碼按鈕寬度 */
            height: 50px; /* 籌碼按鈕高度 */
            border-radius: 50%;
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            font-size: 0.9em;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chip-button:hover {
            transform: scale(1.05);
            box-shadow: 2px 3px 4px rgba(0, 0, 0, 0.5);
        }

        .chip-button:active {
            transform: scale(1.0);
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
        }

        .chip-10 { background-color: #c0392b; } /* 紅色 */
        .chip-100 { background-color: #27ae60; } /* 綠色 */
        .chip-500 { background-color: #3498db; } /* 藍色 */
        .chip-1000 { background-color: #f39c12; } /* 黃色 */
        .chip-10000 { background-color: #9b59b6; } /* 紫色 */
        .chip-allin { background-color: #e74c3c; font-size: 0.8em; } /* 橙紅色，字體小一點 */


        .betting-area {
            display: flex;
            justify-content: center;
            margin-bottom: 20px; /* 底部間距 */
        }

        .bet-button {
            background-color: #f0e68c;
            color: #8B4513;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-weight: bold;
            text-shadow: 1px 1px 1px #c0b36e;
        }

        .bet-button:hover {
            background-color: #ffd700;
            transform: translateY(-1px);
            box-shadow: 2px 3px 4px rgba(0, 0, 0, 0.5);
        }

        .bet-button:active {
            transform: translateY(0);
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
        }

        .opponent-chips-display, .player-chips-display { /* 統一籌碼顯示樣式 */
            background-color: rgba(0, 0, 0, 0.3); /* 半透明背景 */
            padding: 8px 15px;
            border-radius: 6px;
            display: inline-block; /* 讓背景自適應文字寬度 */
            margin-top: 5px; /* 與牌組區域隔開 */
        }

        .initial-cards-area {
            margin-bottom: 15px; /* 與擺牌區域隔開 */
            min-height: 100px; /* 確保有足夠高度顯示牌 */
            flex-wrap: wrap; /*  牌太多時換行 */
            justify-content: flex-start; /*  靠左對齊，換行後對齊 */
            padding: 10px; /*  容器內邊距 */
            border: 2px dashed rgba(255, 255, 255, 0.4); /*  虛線邊框，提示區域 */
            border-radius: 8px; /*  圓角 */
        }

        .initial-cards-area .card { /* 原始手牌區域的牌樣式 */
            margin: 5px; /*  牌之間間距 */
        }

        .opponent-cards .card { /* 電腦對手牌樣式 */
            background-color: #f0f0f0; /*  稍微不同的底色 */
        }

        .player-cards .card { /* 玩家牌樣式 */
            background-color: #e0f7fa; /*  更淺的藍色底 */
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>網頁十三張</h1>

        <div id="status" class="status-display">請開始擺牌</div>

        <div class="opponents-area">
            <div class="opponent-area opponent1-area">
                <h2>電腦 1</h2>
                <div class="hand-area opponent-hand-area">
                    <h3>前道 (Front)</h3> <div id="opponent1FrontHandCards" class="cards opponent-cards"></div>
                    <h3>中道 (Middle)</h3> <div id="opponent1MiddleHandCards" class="cards opponent-cards"></div>
                    <h3>後道 (Back)</h3> <div id="opponent1BackHandCards" class="cards opponent-cards"></div>
                </div>
                <div class="chips-display opponent-chips-display">籌碼: <span id="opponent1Chips">10000</span></div>
            </div>

            <div class="opponent-area opponent2-area">
                <h2>電腦 2</h2>
                <div class="hand-area opponent-hand-area">
                    <h3>前道 (Front)</h3> <div id="opponent2FrontHandCards" class="cards opponent-cards"></div>
                    <h3>中道 (Middle)</h3> <div id="opponent2MiddleHandCards" class="cards opponent-cards"></div>
                    <h3>後道 (Back)</h3> <div id="opponent2BackHandCards" class="cards opponent-cards"></div>
                </div>
                <div class="chips-display opponent-chips-display">籌碼: <span id="opponent2Chips">10000</span></div>
            </div>

            <div class="opponent-area opponent3-area">
                <h2>電腦 3</h2>
                <div class="hand-area opponent-hand-area">
                    <h3>前道 (Front)</h3> <div id="opponent3FrontHandCards" class="cards opponent-cards"></div>
                    <h3>中道 (Middle)</h3> <div id="opponent3MiddleHandCards" class="cards opponent-cards"></div>
                    <h3>後道 (Back)</h3> <div id="opponent3BackHandCards" class="cards opponent-cards"></div>
                </div>
                 <div class="chips-display opponent-chips-display">籌碼: <span id="opponent3Chips">10000</span></div>
            </div>
        </div>

        <div class="player-area">
            <h2>您的牌</h2>
            <div id="playerCardsPlaceholder" class="cards initial-cards-area">
                </div>
            <div class="hand-area player-hand-area">
                <h3>前道 (Front) (3 張)</h3> <div id="playerFrontHandCards" class="cards player-cards"></div>
                <h3>中道 (Middle) (5 張)</h3> <div id="playerMiddleHandCards" class="cards player-cards"></div>
                <h3>後道 (Back) (5 張)</h3> <div id="playerBackHandCards" class="cards player-cards"></div>
            </div>
        </div>

        <div class="controls-area">
            <button id="hintButton" class="hint-button action-button" onclick="showHint()">提示</button>
            <button id="arrangeButton" class="action-button" onclick="arrangeCards()">排列完成</button>
            <button id="resetButton" class="action-button" onclick="resetGame()">重新開始</button>
        </div>

        <div class="chips-display player-chips-display">您的籌碼: <span id="playerChips">10000</span></div>

        <div class="chips-area">
            <button class="chip-button chip-10" onclick="setBetAmount(10)">10</button>
            <button class="chip-button chip-100" onclick="setBetAmount(100)">100</button>
            <button class="chip-button chip-500" onclick="setBetAmount(500)">500</button>
            <button class="chip-button chip-1000" onclick="setBetAmount(1000)">1000</button>
            <button class="chip-button chip-10000" onclick="setBetAmount(10000)">10000</button>
            <button class="chip-button chip-allin" onclick="setBetAmount('allin')">All In</button>
        </div>

        <div class="betting-area">
            <button class="bet-button" onclick="placeBet()">下注</button>
        </div>

    </div>
    <script>
        let playerChips = 10000; // 玩家初始籌碼
        let opponentChips = 10000; // 電腦對手初始籌碼 (可以共用一個變數或為每個對手設定獨立變數)
        let betAmount = 0; // 玩家下注金額
        let betPlaced = false; // 玩家是否已下注
        let deck = []; // 牌組
        let playerHand = []; // 玩家手牌 (新增)
        let opponentHands = [[], [], []]; // 電腦對手手牌 (新增 - 二維陣列，三個對手)

        let playerChipsDisplay = document.getElementById('playerChips');
        let opponentChipsDisplay = document.querySelectorAll('.opponent-chips-display span'); // 選擇所有電腦對手的籌碼顯示
        let statusDisplay = document.getElementById('status');
        let playerCardsPlaceholder = document.getElementById('playerCardsPlaceholder'); // 原始手牌區

        let playerFrontHandCardsArea = document.getElementById('playerFrontHandCards');
        let playerMiddleHandCardsArea = document.getElementById('playerMiddleHandCards');
        let playerBackHandCardsArea = document.getElementById('playerBackHandCards');

        let opponent1FrontHandCardsArea = document.getElementById('opponent1FrontHandCards');
        let opponent1MiddleHandCardsArea = document.getElementById('opponent1MiddleHandCards');
        let opponent1BackHandCardsArea = document.getElementById('opponent1BackHandCards');
        let opponent1ChipsDisplay = document.getElementById('opponent1Chips');

        let opponent2FrontHandCardsArea = document.getElementById('opponent2FrontHandCards');
        let opponent2MiddleHandCardsArea = document.getElementById('opponent2MiddleHandCards');
        let opponent2BackHandCardsArea = document.getElementById('opponent2BackHandCards');
        let opponent2ChipsDisplay = document.getElementById('opponent2Chips');

        let opponent3FrontHandCardsArea = document.getElementById('opponent3FrontHandCards');
        let opponent3MiddleHandCardsArea = document.getElementById('opponent3MiddleHandCards');
        let opponent3BackHandCardsArea = document.getElementById('opponent3BackHandCards');
        let opponent3ChipsDisplay = document.getElementById('opponent3Chips');


        let gameStarted = false;


        playerChipsDisplay.textContent = playerChips;
        opponentChipsDisplay.forEach(span => span.textContent = opponentChips); // 初始化所有電腦對手的籌碼顯示


        function showHint() { alert('提示功能待實作'); }
        function arrangeCards() { alert('排列完成功能待實作'); }
        function resetGame() {
            playerChips = 10000;
            playerChipsDisplay.textContent = playerChips;
            opponentChipsDisplay.forEach(span => span.textContent = opponentChips); // 重置所有電腦對手的籌碼顯示
            betAmount = 0;
            betPlaced = false;
            gameStarted = false;
            clearCards();
            setStatus("遊戲已重置，請下注");
        }

        function setBetAmount(amount) {
            if (gameStarted || betPlaced) return; // 遊戲開始或已下注，不處理

            if (amount === 'allin') {
                betAmount = playerChips; // All In 則下注所有籌碼
            } else {
                betAmount = amount; // 否則下注指定金額
            }

            if (betAmount > playerChips) {
                betAmount = playerChips; // 防止下注金額超過持有籌碼
            }

            setStatus(`您設定下注金額為: ${betAmount}`); // 更新狀態訊息顯示下注金額
        }


        function placeBet() {
            if (gameStarted || betPlaced) {
                setStatus("請先完成當前牌局"); // 避免重複下注
                return;
            }

            if (betAmount <= 0) {
                setStatus("請先設定下注金額"); // 提示先設定下注金額
                return;
            }

            if (betAmount > playerChips) {
                setStatus("您的籌碼不足，無法下注"); // 籌碼不足提示
                return;
            }


            setStatus(`您已下注 ${betAmount} 籌碼`); // 顯示下注成功訊息
            betPlaced = true; // 設定已下注旗標
        }


        function dealCards() {
            if (!betPlaced) {
                setStatus("請先下注"); // 發牌前檢查是否已下注
                return;
            }
            if (gameStarted) {
                setStatus("牌局已開始，請稍後");
                return;
            }

            gameStarted = true;
            clearCards();
            setStatus("發牌中...");

            deck = createDeck(); // 1. 創建牌組
            shuffleDeck(deck); // 2. 洗牌

            // 3. 發牌給玩家和電腦對手 (每人 13 張)
            playerHand = deck.splice(0, 13); // 從牌組取出 13 張給玩家
            opponentHands[0] = deck.splice(0, 13); // 發給電腦對手 1
            opponentHands[1] = deck.splice(0, 13); // 發給電腦對手 2
            opponentHands[2] = deck.splice(0, 13); // 發給電腦對手 3

            // 4. 顯示玩家的初始手牌 (在 playerCardsPlaceholder 區域)
            displayInitialPlayerCards(playerHand);


        }

        function createDeck() {
            const suits = ['♥', '♦', '♣', '♠'];
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            let deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit: suit, rank: rank });
                }
            }
            return deck;
        }

        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        // 新增 displayInitialPlayerCards 函式，顯示玩家初始手牌
        function displayInitialPlayerCards(hand) {
            playerCardsPlaceholder.innerHTML = ''; // 清空原始手牌區域

            hand.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.textContent = getCardDisplay(card); // 顯示牌面文字 (例如: "K♥")
                playerCardsPlaceholder.appendChild(cardElement); // 將牌 DOM 元素加入手牌區域
            });
        }


        function getCardDisplay(card) {
            return card.rank + card.suit;
        }


        function clearCards() {
            playerCardsPlaceholder.innerHTML = ''; // 清空玩家原始手牌顯示區域
            playerFrontHandCardsArea.innerHTML = '';
            playerMiddleHandCardsArea.innerHTML = '';
            playerBackHandCardsArea.innerHTML = '';

            opponent1FrontHandCardsArea.innerHTML = '';
            opponent1MiddleHandCardsArea.innerHTML = '';
            opponent1BackHandCardsArea.innerHTML = '';

            opponent2FrontHandCardsArea.innerHTML = '';
            opponent2MiddleHandCardsArea.innerHTML = '';
            opponent2BackHandCardsArea.innerHTML = '';

            opponent3FrontHandCardsArea.innerHTML = '';
            opponent3MiddleHandCardsArea.innerHTML = '';
            opponent3BackHandCardsArea.innerHTML = '';
        }

        function setStatus(message) {
            statusDisplay.textContent = message;
        }


    </script>
</body>
</html>