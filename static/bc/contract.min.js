class Contract{constructor(e,t,n){this.user=e,this.reviewer=t,this.amount=n,this.loadingElement=null,this.initStyles(),this.setupUI()}initStyles(){let e=document.createElement("style");e.innerHTML=`
            body {
                font-family: Arial, sans-serif;
                background-color: white;
                text-align: center;
            }
            #modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                overflow: auto;
                background-color: rgba(0, 0, 0, 0.5);
            }
            #modalContent {
                background-color: white;
                margin: 15% auto;
                padding: 20px;
                border: 1px solid #888;
                width: 400px;
                text-align: left;
                border-radius: 8px;
            }
            #loading {
                display: none;
                font-size: 16px;
                color: #61dafb;
            }
            #authorizeButton {
                background-color: #61dafb;
                color: black;
                border: none;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
                margin-right: 10px;
            }
            #cancelButton {
                background-color: white;
                color: red;
                border: none;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
            }
        `,document.head.appendChild(e)}setupUI(){this.createModal(),this.showModal(),this.createButtons()}createModal(){let e=document.createElement("div");e.id="modal",e.innerHTML=`
            <div id="modalContent">
                <h1>Transaction Details</h1>
                <p>User: <span id="user">${this.user}</span></p>
                <p>Reviewer: <span id="reviewer">${this.reviewer}</span></p>
                <p>Amount: <span id="amount">${this.amount}</span></p>
                <p id="loading">Loading...</p>
            </div>
        `,document.body.appendChild(e)}showModal(){document.getElementById("modal").style.display="block"}hideModal(){document.getElementById("modal").style.display="none"}createButtons(){let e=document.createElement("div");e.innerHTML=`
            <button id="authorizeButton" onclick="processPayment()">Authorize Payment</button>
            <button id="cancelButton" onclick="cancelPayment()">Cancel</button>
        `,document.getElementById("modalContent").appendChild(e)}async reqPayment(){let e=await fetch("https://sites.wtechhk.xyz/wbank/hash/transfer",{method:"GET",headers:{username:this.user,reviewer:this.reviewer,amount:this.amount}});try{let t=await e.json();return t.success?t.success:t["Error-hint"]}catch(n){return console.error(n),null}}convertToAddress(e){return"0x"+e.slice(0,40)}showLoading(){this.loadingElement=document.getElementById("loading"),this.loadingElement.style.display="block"}hideLoading(){this.loadingElement&&(this.loadingElement.style.display="none")}async processPayment(){this.showLoading();let e=await this.reqPayment();return this.hideLoading(),this.hideModal(),e}static init(e,t,n){return new Contract(e,t,n)}}window.Contract=Contract;
